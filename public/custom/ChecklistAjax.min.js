$(document).ready(function(){function e(){$.get("/coordinator/budget/getlatest",function(e){$(".slot").text(e.slot_count),$(".budget").text(e.amount)})}var t="/coordinator/checklist";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var a="",i=$("#student-table").DataTable({processing:!0,serverSide:!0,columnDefs:[{width:"130px",targets:4},{width:"150px",targets:3},{width:"150px",targets:2}],ajax:{type:"POST",url:dataurl,data:function(e){e.strUserFirstName=$("#strUserFirstName").val(),e.strUserMiddleName=$("#strUserMiddleName").val(),e.strUserLastName=$("#strUserLastName").val(),e.intDistID=$("#intDistID").val(),e.intCounID=$("#intCounID").val(),e.intBaraID=$("#intBaraID").val(),e.intBatcID=$("#intBatcID").val(),e.strPersStreet=$("#strPersStreet").val(),e.intStepID=$("#intStepID").val(),e.strPersReligion=$("#strPersReligion").val()}},columns:[{data:"id",name:"users.id"},{data:"strStudName",name:"strStudName"},{data:"counter",name:"counter",searchable:!1,orderable:!1},{data:"stipend",name:"stipend",searchable:!1,orderable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#btn-advSearch").on("click",function(e){i.draw(),e.preventDefault(),$("#frmAdv").trigger("reset"),$("#advanced_search").modal("hide")}),$("#advanced_search").on("hide.bs.modal",function(){$("#frmAdv").trigger("reset")}),$("#view_step").on("hide.bs.modal",function(){$("#frmStep").trigger("reset"),$(".steps").empty()}),$("#view_claim").on("hide.bs.modal",function(){$("#frmClaim").trigger("reset"),$(".stipend").empty()}),$("#advsearch").click(function(){$("#advanced_search").modal("show")}),$("#student-list").on("click",".btn-progress",function(){$(this).attr("disabled","disabled");var e=$(this);setTimeout(function(){e.removeAttr("disabled")},1e3);var i=$(this).val();a=i,$.get(t+"/create/"+i,function(e){$.each(e,function(e,t){var a="<li><input type='checkbox' id=check"+t.id+" name='steps[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".steps").append(a)}),void 0!=e[0]?$("#view_step").modal("show"):$.notify({icon:"fa fa-check",message:"All requirement passed"},{type:"success",z_index:2e3,delay:5e3})})}),$("#student-list").on("click",".open-modal",function(){$(this).attr("disabled","disabled");var e=$(this);setTimeout(function(){e.removeAttr("disabled")},1e3);var i=$(this).val();a=i,$.get(t+"/allocation/"+i,function(e){$.each(e,function(e,t){if(null!=t.allocation_type_id){a="<li><input type='checkbox' id="+t.id+" name='claim[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".stipend").append(a)}else{var a="<li class='done'><span class='text' style='padding-left: 15px;'>"+t.description+"</span> Disabled</li>";$(".stipend").append(a)}}),void 0!=e[0]?$("#view_claim").modal("show"):$.notify({icon:"fa fa-check",message:"All allocation claimed"},{type:"success",z_index:2e3,delay:5e3})})}),$("#btn-save").click(function(){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var t=$("#frmClaim").serialize();$.ajax({url:"/coordinator/checklist/allocation/"+a,type:"PUT",data:t,dataType:"json",success:function(t){$("#view_claim").modal("hide"),i.draw(),e(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$("#btn-submit").click(function(){$("#btn-submit").attr("disabled","disabled"),setTimeout(function(){$("#btn-submit").removeAttr("disabled")},1e3);var e=$("#frmStep").serialize();$.ajax({url:t+"/"+a,type:"PUT",data:e,dataType:"json",success:function(e){$("#view_step").modal("hide"),i.draw(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$(".todo-list").todoList()});