$(document).ready(function(){var e="/coordinator/checklist";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t="",a=$("#student-table").DataTable({processing:!0,serverSide:!0,columnDefs:[{width:"130px",targets:3},{width:"150px",targets:2},{width:"150px",targets:1}],ajax:{type:"POST",url:dataurl,data:function(e){e.strUserFirstName=$("#strUserFirstName").val(),e.strUserMiddleName=$("#strUserMiddleName").val(),e.strUserLastName=$("#strUserLastName").val(),e.intDistID=$("#intDistID").val(),e.intCounID=$("#intCounID").val(),e.intBaraID=$("#intBaraID").val(),e.intBatcID=$("#intBatcID").val(),e.strPersStreet=$("#strPersStreet").val(),e.intStepID=$("#intStepID").val(),e.strPersReligion=$("#strPersReligion").val()}},columns:[{data:"strStudName",name:"strStudName"},{data:"counter",name:"counter",searchable:!1,orderable:!1},{data:"stipend",name:"stipend",searchable:!1,orderable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#btn-advSearch").on("click",function(e){a.draw(),e.preventDefault(),$("#frmAdv").trigger("reset"),$("#advanced_search").modal("hide")}),$("#advanced_search").on("hide.bs.modal",function(){$("#frmAdv").trigger("reset")}),$("#view_step").on("hide.bs.modal",function(){$("#frmStep").trigger("reset"),$(".steps").empty()}),$("#view_claim").on("hide.bs.modal",function(){$("#frmClaim").trigger("reset"),$(".stipend").empty()}),$("#advsearch").click(function(){$("#advanced_search").modal("show")}),$("#student-list").on("click",".btn-progress",function(){var a=0,n=$(this).val();t=n,$.get(e+"/create/"+n,function(e){$.each(e,function(e,t){a++;var n="<li><input type='checkbox' id=check"+t.id+" name='steps[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".steps").append(n)})}),setTimeout(function(){$.get(e+"/"+n,function(e){for(var t=0;t<a;t++)try{$("#check"+e[t].step_id).val()==e[t].step_id&&$("#check"+e[t].step_id).attr("checked","checked").parent().addClass("done")}catch(e){}}),$("#view_step").modal("show")},1e3)}),$("#student-list").on("click",".open-modal",function(){var a=0,n=$(this).val();t=n,$.get(e+"/allocation",function(e){$.each(e,function(e,t){a++;var n="<li><input type='checkbox' id="+t.id+" name='claim[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".stipend").append(n)})}),setTimeout(function(){$.get(e+"/allocation/"+n,function(e){for(var t=0;t<a;t++)try{$("#"+e[t].allocation_id).val()==e[t].allocation_id&&$("#"+e[t].allocation_id).attr("checked","checked").parent().addClass("done")}catch(e){}}),$("#view_claim").modal("show")},1e3)}),$("#btn-save").click(function(){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var e=$("#frmClaim").serialize();$.ajax({url:"/coordinator/checklist/allocation/"+t,type:"PUT",data:e,dataType:"json",success:function(e){$("#view_claim").modal("hide"),a.draw(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$("#btn-submit").click(function(){$("#btn-submit").attr("disabled","disabled"),setTimeout(function(){$("#btn-submit").removeAttr("disabled")},1e3);var n=$("#frmStep").serialize();$.ajax({url:e+"/"+t,type:"PUT",data:n,dataType:"json",success:function(e){$("#view_step").modal("hide"),a.draw(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$(".todo-list").todoList()});