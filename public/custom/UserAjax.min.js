$(document).ready(function(){function e(){swal({title:"Record Deleted!",type:"warning",text:"<center>Refresh Records?</center>",html:!0,showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Refresh",cancelButtonText:"Cancel",closeOnConfirm:!0,allowOutsideClick:!0,closeOnCancel:!0},function(e){e&&t.draw()})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t=$("#users-table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columnDefs:[{width:"70px",targets:4},{width:"70px",targets:3}],columns:[{data:"strUserName",name:"strUserName"},{data:"email",name:"email"},{data:"last_login",name:"last_login"},{data:"type",name:"type"},{data:"is_active",name:"is_active",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#users-list").on("change","#isActive",function(){var t=$(this).val();$.ajax({url:"/admin/users/checkbox/"+t,type:"PUT",success:function(t){Pace.restart(),"Deleted"==t&&e()},error:function(e){}})}),$("#users-list").on("click",".btn-delete",function(){var n=$(this).val();swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Delete",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(a){setTimeout(function(){a&&$.ajax({url:"/admin/users/"+n,type:"DELETE",success:function(n){"Deleted"==n?e():"true"==n[0]?swal({title:"Failed!",text:"<center>"+n[1].last_name+" is in use</center>",type:"error",showConfirmButton:!1,allowOutsideClick:!0,html:!0}):(t.draw(),swal({title:"Deleted!",text:"<center>"+n.last_name+" is Deleted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0}))},error:function(e){}})},500)})})});