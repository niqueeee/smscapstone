$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e=$("#table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columnDefs:[{width:"200px",targets:5},{width:"70px",targets:4},{width:"150px",targets:2}],columns:[{data:"strStudName",name:"strStudName"},{data:"title",name:"messages.title"},{data:"date_created",name:"messages.date_created"},{data:"type",name:"users.type"},{data:"is_read",name:"receivers.is_read",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#list").on("change","#isActive",function(){var e=$(this).val();$.ajax({url:url2+"/"+e,type:"PUT",success:function(e){Pace.restart(),"Deleted"==e&&refresh()},error:function(t){console.log(url+"/"+e),console.log("Error:",t)}})}),$("#list").on("click",".btn-delete",function(){var t=$(this).val();swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Delete",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(a){setTimeout(function(){a&&$.ajax({url:urldelete+"/"+t,type:"DELETE",success:function(t){console.log(t),"Deleted"==t?refresh():"true"==t[0]?swal({title:"Failed!",text:"<center>"+t[1].title+" is in use</center>",type:"error",showConfirmButton:!1,allowOutsideClick:!0,html:!0}):(e.draw(),swal({title:"Deleted!",text:"<center>"+t.title+" is Deleted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0}))},error:function(e){console.log(e)}})},500)})})});