$(document).ready(function(){$("#btn-add").click(function(){$("#txt").text("Add Achivement"),$("#btn-save").val("add"),$("#frmAchievement").trigger("reset"),$("#add_achievement").modal("show")});var e=new Date;e.setFullYear((new Date).getFullYear()),$("#datepicker").datepicker({viewMode:"years",endDate:e,autoclose:!0,format:"yyyy-mm-dd"});var t=$("#achievement-table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columnDefs:[{width:"180px",targets:5},{width:"70px",targets:4},{width:"70px",targets:3},{width:"150px",targets:2}],columns:[{data:"description",name:"description"},{data:"place_held",name:"place_held"},{data:"date_held",name:"date_held"},{data:"status",name:"status",searchable:!1},{data:"token_process",name:"token_process",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#add_achievement").on("hidden.bs.modal",function(){$("#frmAchivement").trigger("reset"),$("#frmAchivement").parsley().destroy()}),$("#btn-save").click(function(){if($("#frmAchivement").parsley().destroy(),$("#frmAchivement").parsley().isValid()){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var e=new FormData($("#frmAchivement")[0]),a="POST",n="/student/achievements";"update"==$("#btn-save").val()&&(a="PUT",n+="/"+id),$.ajax({type:a,url:n,data:e,processData:!1,dataType:"json",contentType:!1,success:function(e){$("#add_achievement").modal("hide"),t.draw(),swal({title:"Success!",text:"<center>"+e.description+" is Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){console.log("Error:",e.responseText),$.notify({message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}})});