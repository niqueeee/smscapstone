$(document).ready(function(){function e(e,l){var a=$(e).offset().top-l;$(window).scrollTop()!=a&&$("html, body").stop().animate({scrollTop:a},0)}function l(e,l){var a=e.data("number-of-steps"),t=e.data("now-value"),r=0;"right"==l?r=t+100/a:"left"==l&&(r=t-100/a),e.attr("style","width: "+r+"%;").data("now-value",r)}function a(e){u.removeClass("current").eq(e).addClass("current"),$(".form-navigation .previous").toggle(e>0);var l=e>=u.length-1;l?$(".form-navigation .next").toggle(!l):$(".form-navigation .next").toggle(e>1)}function t(){return u.index(u.filter(".current"))}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var r=0,o="",n=0,s="",i="/apply",c=0,d=new Date,b=1,h=$("#grade-table").DataTable({paging:!1,lengthChange:!1,searching:!1,ordering:!0,info:!1,autoWidth:!1,rowId:0,columnDefs:[{targets:[0],visible:!1}]});d.setFullYear((new Date).getFullYear()-18),$("#datepicker").datepicker({viewMode:"years",endDate:d,autoclose:!0,format:"yyyy-mm-dd"}),$('input[type="text"], textarea').on("blur",function(e){var l=$(this),a=l.val();a=a.substr(0,1).toUpperCase()+a.substr(1).toLowerCase(),l.val(a)}),window.Parsley.on("field:error",function(e){if("file"==e.$element[0].type){("strApplPicture"==e.$element[0].name?$(".images"):$(".pdf")).popover({trigger:"manual",container:"body",placement:"auto",content:function(){return e.getErrorsMessages().join(";")}}).popover("show")}else"textarea"==e.$element[0].type?e.$element.popover({trigger:"manual",container:"body",placement:"auto",content:function(){return e.getErrorsMessages().join(";")}}).popover("show"):(e.$element.val(""),e.$element.attr("placeholder",e.getErrorsMessages().join(";")))}),window.Parsley.on("field:success",function(e){if("file"==e.$element[0].type){("strApplPicture"==e.$element[0].name?$(".images"):$(".pdf")).popover("destroy")}else"textarea"==e.$element[0].type&&e.$element.popover("destroy");e.$element.removeAttr("placeholder")});var u=$(".form-section");$.backstretch("../../img/backgrounds/1apply.jpg"),$(".f1 .form-section:first").fadeIn("slow"),e($(".f1"),20),$(".form-navigation .previous").click(function(){$("#frmApply").parsley().destroy(),$('input[type="text"], textarea').removeAttr("placeholder"),a(t()-1);var r=$(this).parents(".f1").find(".f1-step.active"),o=$(this).parents(".f1").find(".f1-progress-line");r.removeClass("active").prev().removeClass("activated").addClass("active"),l(o,"left"),$(this).prev().fadeIn(),e($(".f1"),20),c--}),$(".form-navigation .next").click(function(){var r=!0;if($(".f1").parsley().validate({group:"block-"+t()})){if(3==c&&"yes"==v&&$("#strSiblDateFrom").val()>=$("#strSiblDateTo").val()&&(r=!1,alert("Date To Must Not be equal or less than Date From")),4==c){var n=$("#school1").val()+""+$("#course1").val(),i=$("#school2").val()+""+$("#course2").val(),d=$("#school3").val()+""+$("#course3").val();$("#elemenrolled").val()>=$("#elemgrad").val()?(r=!1,alert("Elem Enrolled Must Not be equal or less than Graduate")):$("#hsenrolled").val()>=$("#hsgrad").val()?(r=!1,alert("HS Enrolled Must Not be equal or less than Date Graduate")):n==i?(r=!1,alert("The value of First and Second School and Course Must Not be the Same ")):i==d?(r=!1,alert("The value of Second and Third School and Course Must Not be the Same ")):d==n&&(r=!1,alert("The value of First and Third School and Course Must Not be the Same "))}if(r){a(t()+1);var b=$(this).parents(".f1").find(".f1-step.active"),h=$(this).parents(".f1").find(".f1-progress-line");b.removeClass("active").addClass("activated").next().addClass("active"),l(h,"right"),$(this).next().fadeIn(),e($(".f1"),20),c++}}if(6==c){var u="<div class='form-group container'><label>Councilor:</label> <h4>"+s+"</h4></div><hr><label class='container'>Personal Info</label><div class='form-group container'><label>Applicant's Name:</label> <h4>"+$("#fname").val()+" "+$("#mname").val()+" "+$("#lname").val()+"</h4><br><label>Gender:</label> <h4>"+$("select[name='PersGender'] option:selected").text()+"</h4><br><label>Birth Date:</label> <h4>"+$("#datepicker").val()+"</h4><br><label>Place of Birth:</label> <h4>"+$("#pob").val()+"</h4><br><label>Religion:</label> <h4>"+$("#strPersReligion").val()+"</h4><br><label>Address:</label> <h4>"+$("#strApplHouseNo").val()+" "+$("#stname").val()+" "+$("select[name='intBaraID'] option:selected").text()+" "+o+"</h4><br><label>Mobile Number:</label> <h4>"+$("#strUserCell").val()+"</h4><br><label>Email Address:</label> <h4>"+$("#email").val()+"</h4><br></div><hr><label class='container'>Family Background</label><div class='form-group col-md-6'><label>Mother's Name:</label> <h4>"+$("#motherfname").val()+" "+$("#motherlname").val()+"</h4><br><label>Citizenship:</label> <h4>"+$("#mothercitizen").val()+"</h4><br><label>Highest Attainment:</label> <h4>"+$("#motherhea").val()+"</h4><br><label>Occupation:</label> <h4>"+$("#motheroccupation").val()+"</h4><br><label>Monthly Income:</label> <h4>"+$("select[name='motherincome'] option:selected").text()+"</h4><br><label>Number of Brother/s:</label> <h4>"+$("#brono").val()+"</h4><br><label>Number of Sister/s:</label> <h4>"+$("#sisno").val()+"</h4><br></div><div class='form-group col-md-6'><label>Father's Name:</label> <h4>"+$("#fatherfname").val()+" "+$("#fatherlname").val()+"</h4><br><label>Citizenship:</label> <h4>"+$("#fathercitizen").val()+"</h4><br><label>Highest Attainment:</label> <h4>"+$("#fatherhea").val()+"</h4><br><label>Occupation:</label> <h4>"+$("#fatheroccupation").val()+"</h4><br><label>Monthly Income:</label> <h4>"+$("select[name='fatherincome'] option:selected").text()+"</h4><br><label>Sibling's Name:</label> <h4>"+$("#strSiblFirstName").val()+" "+$("#strSiblLastName").val()+"</h4><br><label>Date Joined:</label> <h4>From: "+$("#strSiblDateFrom").val()+" To: "+$("#strSiblDateTo").val()+"</h4><br></div><div class='container'></div><hr><label class='container'>Educational Background</label><div class='form-group col-md-6'><label>Elementary</label><br><label>School Name:</label> <h4>"+$("#elemschool").val()+"</h4><br><label>Year Enrolled:</label> <h4>"+$("#elemenrolled").val()+"</h4><br><label>Year Graduated:</label> <h4>"+$("#elemgrad").val()+"</h4><br><label>Achievements/Honors:</label> <h4>"+$("#elemhonors").val()+"</h4><br></div><div class='form-group col-md-6'><label>High School</label><br><label>School Name:</label> <h4>"+$("#hschool").val()+"</h4><br><label>Year Enrolled:</label> <h4>"+$("#hsenrolled").val()+"</h4><br><label>Year Graduated:</label> <h4>"+$("#hsgrad").val()+"</h4><br><label>Achievements/Honors:</label> <h4>"+$("#hshonor").val()+"</h4><br></div><div class='container'></div><hr><label class='container'>College</label><div class='form-group container'><label>School/University Currently Enrolled In:</label> <h4>"+$("select[name='intPersCurrentSchool'] option:selected").text()+"</h4><br><label>Current Course:</label> <h4>"+$("select[name='intPersCurrentCourse'] option:selected").text()+"</h4><br><label>GWA:</label> <h4>"+$("#strPersGwa").val()+"</h4><br></div><hr><label class='container'>Name three(3) courses you wish to enroll in and the respective school (in order of your preference):</label><div class='form-group col-md-4'><label>School 1:</label> <h4>"+$("select[name='school1'] option:selected").text()+"</h4><br><label>Course 1:</label> <h4>"+$("select[name='course1'] option:selected").text()+"</h4><br></div><div class='form-group col-md-4'><label>School 2:</label> <h4>"+$("select[name='school2'] option:selected").text()+"</h4><br><label>Course 2:</label> <h4>"+$("select[name='course2'] option:selected").text()+"</h4><br></div><div class='form-group col-md-4'><label>School 3:</label> <h4>"+$("select[name='school3'] option:selected").text()+"</h4><br><label>Course 3:</label> <h4>"+$("select[name='course3'] option:selected").text()+"</h4><br></div><div class='container'></div><hr><div class='form-group container'><label>Community Involvement/Affiliation</label><br><label>Organization:</label> <h4>"+$("#organization").val()+"</h4><br><label>Position:</label> <h4>"+$("#position").val()+"</h4><br><label>Year of Participation:</label> <h4>"+$("#dateofparticipation").val()+"</h4><br><label>First Answer in Essay:</label> <h4>"+$("#strPersEssay").val()+"</h4><br><label>Second Answer in Essay:</label> <h4>"+$("#strPersEssay2").val()+"</h4><br></div>";$("#summary").replaceWith(u)}}),u.each(function(e,l){$(l).find(":input").attr("data-parsley-group","block-"+e)}),a(0);var v="no";$('input[name="rad"]').on("ifClicked",function(e){"yes"==this.value?(v="yes",$("#questionappear").show("slide",{direction:"up"},1e3)):(v="no",$("#questionappear").hide())}),$('input[name="col"]').on("ifClicked",function(e){"no"==this.value?$("#college").show("slide",{direction:"up"},1e3):$("#college").hide()}),$("input").iCheck({radioClass:"iradio_flat-red"}),$("#councilor").on("click",".councilor",function(){n=$(this).attr("value"),$("#intCounID").val(n),s=$("#countxt"+n).text(),$(".form-navigation .next").click()}),$(".district").on("click",function(){r=$(this).attr("value"),$("#intDistID").val(r),o=$("#txt"+r).text(),$.get(i+"/"+r+"/edit",function(e){$("#councilor").empty(),$.each(e,function(e,l){var a="<div class='col-md-4'><div class='box box-widget councilor widget-user-2 text-center' style='cursor: pointer; background-color: #FF9376; border-style: solid;' value="+l.id+"><div class='widget-user-header'><h1 id=countxt"+l.id+">"+l.last_name+", "+l.first_name+" "+l.middle_name+"</h1></div></div></div>";$("#councilor").append(a)})}),$.get(i+"/"+r,function(e){$("#intBaraID").empty(),$.each(e,function(e,l){$("#intBaraID").append("<option value="+l.id+">"+l.description+"</option>")})}),$(".form-navigation .next").click()}),$("#frmApply").bind("keypress",function(e){if(13==e.keyCode)return $("#btn-next").click(),!1}),$("#intPersCurrentSchool").on("change",function(){var e=$(this).val();$.ajax({url:i+"/"+e,type:"DELETE",success:function(e){$("#strSystDesc").val(e.strSystDesc),$("#view").val(e.intSystID)},error:function(e){console.log("Error:",e)}})}),$("#view").on("click",function(){var e=$(this).val();0==e?alert("No School Selected"):$.ajax({url:i+"/"+e,type:"PUT",success:function(e){var l="<label>Grade Description</label><p>"+e.strSystDesc+"</p><label>Highest Grade</label><p>"+e.strSystHighGrade+"</p><label>Lowest Grade</label><p>"+e.strSystLowGrade+"</p><label>Failing Grade</label><p>"+e.strSystFailGrade+"</p>";$("#details_system").replaceWith(l),$("#details_grade").modal("show")},error:function(e){console.log("Error:",e)}})}),$("#btn-add").on("click",function(){$("#grade_input").modal("show")}),$("#grade_input").on("hide.bs.modal",function(){$("#frmGrade").trigger("reset"),$("#frmGrade").parsley().destroy()}),$("#details_grade").on("hide.bs.modal",function(){}),$("#btn-grade").on("click",function(e){$("#frmGrade").parsley().isValid()&&($("#frmGrade").parsley().destroy(),$.notify({message:"Success!"},{type:"success",z_index:2e3,delay:1e3}),e.preventDefault(),h.row.add([b,$("#strStudSubjCode").val(),$("#strStudSubjDesc").val(),$("#intStudSubjUnit").val(),$("#strStudGrade").val(),"<button type='button' class='btn btn-warning btn-xs btn-detail open-modal'value="+b+"><i class='fa fa-edit'></i> Edit</button> <button type='button' class='btn btn-danger btn-xs btn-delete' value="+b+"><i class='fa fa-trash-o'></i> Delete</button>"]).draw(),b++,$("#frmGrade").trigger("reset"),$("#strStudSubjCode").focus())}),$("#grade-list").on("click",".btn-delete",function(){h.row("#"+$(this).val()).remove().draw()})});