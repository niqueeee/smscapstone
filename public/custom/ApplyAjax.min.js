$(document).ready(function(){function e(e,l){var a=$(e).offset().top-l;$(window).scrollTop()!=a&&$("html, body").stop().animate({scrollTop:a},0)}function l(e,l){var a=e.data("number-of-steps"),t=e.data("now-value"),o=0;"right"==l?o=t+100/a:"left"==l&&(o=t-100/a),e.attr("style","width: "+o+"%;").data("now-value",o)}function a(e){if(b.removeClass("current").eq(e).addClass("current"),2!=n){$(".form-navigation .previous").toggle(e>0);var l=e>=b.length-1;$(".form-navigation .next").toggle(!l)}else $(".form-navigation .next").toggle()}function t(){return b.index(b.filter(".current"))}function o(){var e="";u?($(".academic").toggle(),e="<div class='form-group col-md-6'><label class='control-label'>Description</label><input id='subject_description' class='form-control subject_description' maxlength='45' autocomplete='off' data-parsley-pattern='^[a-zA-Z0-9 ]+$' name='subject_description[]' type='text'></div><div class='form-group col-md-6'><label class='control-label'>Grade</label><input id='subject_grade' class='form-control subject_grade' maxlength='4' autocomplete='off' data-parsley-pattern='^[a-zA-Z0-9. ]+$' name='subject_grade[]' type='text'></div>"):($(".academic").toggle(!1),e="<div class='form-group col-md-6'><label class='control-label'>Description</label><input id='subject_description' class='form-control subject_description' maxlength='45' autocomplete='off' data-parsley-pattern='^[a-zA-Z0-9 ]+$' name='subject_description[]' type='text'></div><div class='form-group col-md-2'><label class='control-label'>Units</label><input id='units' class='form-control units' maxlength='1' autocomplete='off' data-parsley-pattern='^[0-9 ]+$' name='units[]' type='text'></div><div class='form-group col-md-4'><label class='control-label'>Grade</label><input id='subject_grade' class='form-control subject_grade' maxlength='4' autocomplete='off' data-parsley-pattern='^[a-zA-Z0-9. ]+$' name='subject_grade[]' type='text'></div>"),$("#grade").empty().append(e)}var r=0,i=0,s="",n=0,c="no",d=new Date,u=1;d.setFullYear((new Date).getFullYear()-18),$("#datepicker").datepicker({viewMode:"years",endDate:d,autoclose:!0,format:"yyyy-mm-dd"}),window.Parsley.on("field:error",function(e){if("file"==e.$element[0].type){("strApplPicture"==e.$element[0].name?$(".images"):$(".pdf")).popover({trigger:"manual",container:"body",placement:"auto",content:function(){return e.getErrorsMessages().join(";")}}).popover("show")}else"textarea"==e.$element[0].type?e.$element.popover({trigger:"manual",container:"body",placement:"auto",content:function(){return e.getErrorsMessages().join(";")}}).popover("show"):(e.$element.val(""),e.$element.attr("placeholder",e.getErrorsMessages().join(";")))}),window.Parsley.on("field:success",function(e){if("file"==e.$element[0].type){("strApplPicture"==e.$element[0].name?$(".images"):$(".pdf")).popover("destroy")}else"textarea"==e.$element[0].type&&e.$element.popover("destroy");e.$element.removeAttr("placeholder")});var b=$(".form-section");$.backstretch("../../img/backgrounds/1apply.jpg"),$(".f1 .form-section:first").fadeIn("slow"),e($(".f1"),20),$(".form-navigation .previous").click(function(){$("#frmApply").parsley().destroy(),$('input[type="text"], textarea').removeAttr("placeholder"),n--,a(t()-1);var o=$(this).parents(".f1").find(".f1-step.active"),r=$(this).parents(".f1").find(".f1-progress-line");o.removeClass("active").prev().removeClass("activated").addClass("active"),l(r,"left"),$(this).prev().fadeIn(),e($(".f1"),20)}),$(".form-navigation .next").click(function(){var o=!0;if($(".f1").parsley().validate({group:"block-"+t()})){if(1==n&&"yes"==c&&$("#strSiblDateFrom").val()>=$("#strSiblDateTo").val()&&(o=!1,alert("Date To Must Not be equal or less than Date From")),2==n){var i=$("#school1").val()+""+$("#course1").val(),d=$("#school2").val()+""+$("#course2").val(),b=$("#school3").val()+""+$("#course3").val();$("#elemenrolled").val()>=$("#elemgrad").val()?(o=!1,alert("Elem Enrolled Must Not be equal or less than Graduate")):$("#hsenrolled").val()>=$("#hsgrad").val()?(o=!1,alert("HS Enrolled Must Not be equal or less than Date Graduate")):i==d?(o=!1,alert("The value of First and Second School and Course Must Not be the Same ")):d==b?(o=!1,alert("The value of Second and Third School and Course Must Not be the Same ")):b==i&&(o=!1,alert("The value of First and Third School and Course Must Not be the Same "))}if(o){a(t()+1);var h=$(this).parents(".f1").find(".f1-step.active"),p=$(this).parents(".f1").find(".f1-progress-line");h.removeClass("active").addClass("activated").next().addClass("active"),l(p,"right"),$(this).next().fadeIn(),e($(".f1"),20),n++}}if(5==n){for(var m=$('input[name="subject_grade[]"]').length,v=$('input[name="strPersOrganization[]"]').length,f="<div class='form-group'><label>Councilor:</label> <h4>"+s+"</h4></div><hr><label>Personal Info</label><div class='form-group'><label>Applicant's Name:</label> <h4>"+$("#fname").val()+" "+$("#mname").val()+" "+$("#lname").val()+"</h4><br><label>Gender:</label> <h4>"+$("select[name='PersGender'] option:selected").text()+"</h4><br><label>Birth Date:</label> <h4>"+$("#datepicker").val()+"</h4><br><label>Place of Birth:</label> <h4>"+$("#pob").val()+"</h4><br><label>Religion:</label> <h4>"+$("#strPersReligion").val()+"</h4><br><label>Address:</label> <h4>"+$("#strApplHouseNo").val()+" "+$("#stname").val()+" "+$("select[name='intBaraID'] option:selected").text()+" </h4><br><label>Mobile Number:</label> <h4>"+$("#strUserCell").val()+"</h4><br><label>Email Address:</label> <h4>"+$("#email").val()+"</h4><br></div><div class='container'></div><hr><label class='col-xs-12 row'>Family Background</label><div class='form-group col-md-6 row'><label>Mother's Name:</label> <h4>"+$("#motherfname").val()+" "+$("#motherlname").val()+"</h4><br><label>Citizenship:</label> <h4>"+$("#mothercitizen").val()+"</h4><br><label>Highest Attainment:</label> <h4>"+$("#motherhea").val()+"</h4><br><label>Occupation:</label> <h4>"+$("#motheroccupation").val()+"</h4><br><label>Monthly Income:</label> <h4>"+$("select[name='motherincome'] option:selected").text()+"</h4><br><label>Number of Brother/s:</label> <h4>"+$("#brono").val()+"</h4><br><label>Number of Sister/s:</label> <h4>"+$("#sisno").val()+"</h4><br></div><div class='form-group col-md-6 row'><label>Father's Name:</label> <h4>"+$("#fatherfname").val()+" "+$("#fatherlname").val()+"</h4><br><label>Citizenship:</label> <h4>"+$("#fathercitizen").val()+"</h4><br><label>Highest Attainment:</label> <h4>"+$("#fatherhea").val()+"</h4><br><label>Occupation:</label> <h4>"+$("#fatheroccupation").val()+"</h4><br><label>Monthly Income:</label> <h4>"+$("select[name='fatherincome'] option:selected").text()+"</h4><br><label>Sibling's Name:</label> <h4>"+$("#strSiblFirstName").val()+" "+$("#strSiblLastName").val()+"</h4><br><label>Date Joined:</label> <h4>From: "+$("#strSiblDateFrom").val()+" To: "+$("#strSiblDateTo").val()+"</h4><br></div><div class='container'></div><hr><label class='col-xs-12 row'>Educational Background</label><div class='form-group col-md-6 row'><label>Elementary</label><br><label>School Name:</label> <h4>"+$("#elemschool").val()+"</h4><br><label>Year Enrolled:</label> <h4>"+$("#elemenrolled").val()+"</h4><br><label>Year Graduated:</label> <h4>"+$("#elemgrad").val()+"</h4><br><label>Achievements/Honors:</label> <h4>"+$("#elemhonors").val()+"</h4><br></div><div class='form-group col-md-6 row'><label>High School</label><br><label>School Name:</label> <h4>"+$("#hschool").val()+"</h4><br><label>Year Enrolled:</label> <h4>"+$("#hsenrolled").val()+"</h4><br><label>Year Graduated:</label> <h4>"+$("#hsgrad").val()+"</h4><br><label>Achievements/Honors:</label> <h4>"+$("#hshonor").val()+"</h4><br></div><div class='container'></div><hr><label>College</label><div class='form-group'><label>School/University Currently Enrolled In:</label> <h4>"+$("select[name='intPersCurrentSchool'] option:selected").text()+"</h4><br><label>Current Course:</label> <h4>"+$("select[name='intPersCurrentCourse'] option:selected").text()+"</h4><br></div><div class='form-group'><div class='row'>",g=0;g<m;g++)f+=u?"<div class='col-md-6'><label>Description:</label> <h4>"+$(".subject_description")[g].value+"</h4><br></div><div class='col-md-6'><label>Grade:</label> <h4>"+$(".subject_grade")[g].value+"</h4><br></div>":"<div class='col-md-4'><label>Description:</label> <h4>"+$(".subject_description")[g].value+"</h4><br></div><div class='col-md-4'><label>Units:</label> <h4>"+$(".units")[g].value+"</h4><br></div><div class='col-md-4'><label>Grade:</label> <h4>"+$(".subject_grade")[g].value+"</h4><br></div>";$("select[id='school1'] option:selected").text(),$("select[id='course1'] option:selected").text(),$("select[id='school2'] option:selected").text(),$("select[id='course2'] option:selected").text(),$("select[id='school3'] option:selected").text(),$("select[id='course3'] option:selected").text();for(g=0;g<v;g++)f+="<label>Organization:</label> <h4>"+$(".organization")[g].value+"</h4><br><label>Position:</label> <h4>"+$(".position")[g].value+"</h4><br><label>Year of Participation:</label> <h4>"+$(".year")[g].value+"</h4><br>";f+="<label>Essay:</label> <h4><dd>"+$("#essay").val()+"</dd></h4><br></div>",$("#summary").empty().append(f)}3==n&&(r=$("#intBaraID").val(),$.get("/apply/"+r,function(e){$("#councilor").empty(),$.each(e,function(e,l){var a="<div class='col-md-6'><div class='box box-widget councilor widget-user-2 text-center' style='cursor: pointer; background-color: #4A5459; border-style: solid;' value="+l.id+"><div class='widget-user-header'><div class='widget-user-image'><img class='profile-user-img img-responsive img-square' src='"+asset+"/"+l.picture+"' alt='User Avatar'></div><h3 class='widget-user-username text-widget' id=countxt"+l.id+">"+l.strCounName+"</h3><h5 class='widget-user-desc slot text-widget'>Slot: 100/100</h5></div></div></div>";$("#councilor").append(a)}),$("#intDistID").val(e[0].district_id)}))}),b.each(function(e,l){$(l).find(":input").attr("data-parsley-group","block-"+e)}),a(0),$("#councilor").on("click",".councilor",function(){i=$(this).attr("value"),$("#intCounID").val(i),s=$("#countxt"+i).text(),$(".form-navigation .next").click()}),$('input[name="rad"]').on("ifClicked",function(e){"yes"==this.value?(c="yes",$("#questionappear").show("slide",{direction:"up"},1e3)):(c="no",$("#questionappear").hide())}),$.each($('input[name="rad"]'),function(e,l){$(this).attr("checked")&&"yes"==$(this).attr("id")&&(c="yes",$("#questionappear").show("slide",{direction:"up"},1e3))}),$('input[name="col"]').on("ifClicked",function(e){"no"==this.value?($("#college").show("slide",{direction:"up"},1e3),u=0):($("#college").hide(),u=1),o()}),$.each($('input[name="col"]'),function(e,l){$(this).attr("checked")&&("no"==$(this).attr("id")?(u=0,$("#college").show("slide",{direction:"up"},1e3)):$(".academic").toggle())}),$("input").iCheck({radioClass:"iradio_flat-red"}),$("#frmApply").bind("keypress",function(e){if(13==e.keyCode)return $("#btn-next").click(),!1}),$(".btn-submit").on("click",function(e){e.preventDefault(),swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Apply",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(e){setTimeout(function(){e&&$("#frmApply").submit()},500)})}),$(".affiliation").click(function(){var e="<div class='form-group col-md-6'>"+$(".organization")[0].outerHTML+"</div><div class='form-group col-md-3'>"+$(".position")[0].outerHTML+"</div><div class='form-group col-md-3'><div class='input-group'><div class='input-group-addon'><i class='fa fa-calendar'></i></div>"+$(".year")[0].outerHTML+"</div></div>";$("#affiliation").append(e)}),$(".grade").click(function(){var e="";e=u?"<div class='form-group col-md-6'>"+$(".subject_description")[0].outerHTML+"</div><div class='form-group col-md-6'>"+$(".subject_grade")[0].outerHTML+"</div>":"<div class='form-group col-md-6'>"+$(".subject_description")[0].outerHTML+"</div><div class='form-group col-md-2'>"+$(".units")[0].outerHTML+"</div><div class='form-group col-md-4'>"+$(".subject_grade")[0].outerHTML+"</div>",$("#grade").append(e)}),$(".barangay").select2(),$(".dropdown").select2(),o()});