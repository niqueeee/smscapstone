$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t=$("#student-table").DataTable({processing:!0,serverSide:!0,order:[1,"desc"],columnDefs:[{width:"70px",targets:4},{width:"70px",targets:3}],ajax:{type:"POST",url:dataurl,data:function(t){t.strUserFirstName=$("#strUserFirstName").val(),t.strUserMiddleName=$("#strUserMiddleName").val(),t.strUserLastName=$("#strUserLastName").val(),t.intDistID=$("#intDistID").val(),t.intCounID=$("#intCounID").val(),t.intBaraID=$("#intBaraID").val(),t.intBatcID=$("#intBatcID").val(),t.strPersStreet=$("#strPersStreet").val(),t.strPersReligion=$("#strPersReligion").val()}},columns:[{data:"id",name:"users.id"},{data:"strStudName",name:"strStudName"},{data:"application_date",name:"student_details.application_date",searchable:!1},{data:"checkbox",name:"users.is_active",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#student-list").on("change","#isActive",function(){var t=$(this).val(),a=0;$(this).prop("checked")&&(a=1);var e={is_active:a};$.ajax({url:"/coordinator/list/checkbox/"+t,type:"PUT",data:e,success:function(t){Pace.restart(),"Deleted"==t&&refresh()},error:function(t){}})}),$("body").on("change","#student_status",function(){var t=$(this).attr("selectedbox"),a=$(this),e={student_status:$(this).val()};$.ajax({url:dataurl+"/"+t,type:"PUT",data:e,dataType:"json",success:function(t){Pace.restart(),"Continuing"==t.student_status?a.attr("class","btn btn-md btn-flat btn-warning"):"Graduated"==t.student_status?a.attr("class","btn btn-md btn-flat btn-success"):a.attr("class","btn btn-md btn-flat btn-danger")},error:function(t){}})}),$("#btn-advSearch").on("click",function(a){t.draw(),a.preventDefault(),$("#frmAdv").trigger("reset"),$("#advanced_search").modal("hide")}),$("#advanced_search").on("hide.bs.modal",function(){$("#frmAdv").trigger("reset")}),$("#student-list").on("click",".open-modal",function(){var t=$(this).val();$.get("/coordinator/list/"+t,function(t){var a="Male";t.gender&&(a="Female");var e="<div class='row'><div class='col-sm-5'><div class='form-group'><label>Name:</label><br>"+t.strStudName+"</div><div class='form-group'><label>E-mail Address:</label><br>"+t.email+"</div><div class='form-group'><label>Contact Number:</label><br>"+t.cell_no+"</div><div class='form-group'><label>Gender:</label><br>"+a+"</div><div class='form-group'><label>Birthday:</label><br>"+t.date+"</div><div class='form-group'><label>Address:</label><br>"+t.house_no+" "+t.street+" "+t.barangay+" "+t.district+"</div></div><div class='col-sm-5'><div class='form-group'><label>Course:</label><br>"+t.course+"</div><div class='form-group'><label>Religion:</label><br>"+t.religion+"</div><div class='form-group'><label>School:</label><br>"+t.school+"</div></div><div class='col-sm-2'><img src='"+asset+"/"+t.picture+"' class='profile-user-img img-responsive img-square' alt='User Image'></div></div>";bootbox.alert({title:"Student Information",message:e,backdrop:!0,size:"large",buttons:{ok:{label:"Ok",className:"btn-success btn-md"}}});var s="",r="",n="",l="";"Continuing"==t.student_status?(l="warning",s="selected"):"Graduated"==t.student_status?(l="success",r="selected"):(l="danger",n="selected");var i="<select id='student_status' selectedbox = "+t.id+" class='btn btn-md btn-flat btn-"+l+"' name='student_status'><option value = 'Continuing' class = 'btn-warning' "+s+" >Continuing</option> <option value = 'Graduated' class = 'btn-success' "+r+" >Graduated</option> <option value = 'Forfeit' class = 'btn-danger' "+n+">Forfeit</option></select> <button data-bb-handler='ok' type='button' class='btn btn-success btn-md'>Ok</button>";$(".modal-footer").empty().append(i)})}),$("#advsearch").click(function(){$("#advanced_search").modal("show")})});