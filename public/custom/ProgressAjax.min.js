$(document).ready(function(){var t="/coordinator/progress";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e=$("#student-table").DataTable({processing:!0,serverSide:!0,order:[1,"desc"],columnDefs:[{width:"200px",targets:2},{width:"200px",targets:1}],ajax:{type:"POST",url:dataurl,data:function(t){t.strUserFirstName=$("#strUserFirstName").val(),t.strUserMiddleName=$("#strUserMiddleName").val(),t.strUserLastName=$("#strUserLastName").val(),t.intDistID=$("#intDistID").val(),t.intCounID=$("#intCounID").val(),t.intBaraID=$("#intBaraID").val(),t.intBatcID=$("#intBatcID").val(),t.strPersStreet=$("#strPersStreet").val(),t.intStepID=$("#intStepID").val(),t.strPersReligion=$("#strPersReligion").val()}},columns:[{data:"strStudName",name:"strStudName"},{data:"intStepOrder",name:"steps.order",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#btn-advSearch").on("click",function(t){e.draw(),t.preventDefault(),$("#frmAdv").trigger("reset"),$("#advanced_search").modal("hide")}),$("#advanced_search").on("hide.bs.modal",function(){$("#frmAdv").trigger("reset")}),$("#advsearch").click(function(){$("#advanced_search").modal("show")}),$("#student-list").on("click",".btn-progress",function(){var e=$(this).val(),n=$(this).attr("id");swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Check",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(s){setTimeout(function(){s&&$.ajax({url:t+"/"+e,type:"PUT",success:function(t){var s="<div id='stat"+t.user_id+"'>Todo: "+t.description+" <div class='pull-right'>"+t.order+"/"+n+"</div></div>";$("#stat"+t.user_id).replaceWith(s);var r=t.order/n*100;$("#prog"+e).css("width",r+"%").attr("aria-valuenow",r);var a="<button style='margin-top: 10px;' id"+n+" class='btn btn-warning btn-xs back' value="+t.user_id+"><i class='fa fa-undo'></i> Undo</button>";t.is_steps_done&&($("#dp"+t.user_id).replaceWith(a),$("#detail"+t.user_id).replaceWith("<td>This student meets the requirements for scholarship. This record will now be remove the progess list</td>")),swal({title:"Checked!",text:"<center>"+t.description+" is Checked</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(t){}})},500)})}),$("#student-list").on("click",".open-modal",function(){$(this).val();$("#view_details").modal("show")}),$("#student-list").on("click",".btn-undo",function(){var e=$(this).val(),n=$(this).attr("id");swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-warning",confirmButtonText:"Undo",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(s){setTimeout(function(){s&&$.get(t+"/"+e,function(t){var s="<div id='stat"+t.user_id+"'>Todo: "+t.description+" <div class='pull-right'>"+t.order+"/"+n+"</div></div>";$("#stat"+t.user_id).replaceWith(s);var r=t.order/n*100;$("#prog"+e).css("width",r+"%").attr("aria-valuenow",r),swal({title:"Undo!",text:"<center>"+t.description+" is Undo</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})})},500)})}),$("#student-list").on("click",".back",function(){var n=$(this).val();$(this).attr("id");swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Undo",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(s){setTimeout(function(){s&&$.get(t+"/"+n+"/edit",function(t){e.draw(),swal({title:"Undo!",text:"<center>"+t.description+" is Undo</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})})},500)})})});