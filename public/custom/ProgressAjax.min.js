$(document).ready(function(){var t="/coordinator/progress";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e=$("#student-table").DataTable({processing:!0,serverSide:!0,columnDefs:[{width:"200px",targets:2},{width:"200px",targets:1}],ajax:{type:"POST",url:dataurl,data:function(t){t.strUserFirstName=$("#strUserFirstName").val(),t.strUserMiddleName=$("#strUserMiddleName").val(),t.strUserLastName=$("#strUserLastName").val(),t.intDistID=$("#intDistID").val(),t.intCounID=$("#intCounID").val(),t.intBaraID=$("#intBaraID").val(),t.intBatcID=$("#intBatcID").val(),t.strPersStreet=$("#strPersStreet").val(),t.intStepID=$("#intStepID").val(),t.strPersReligion=$("#strPersReligion").val()}},columns:[{data:"strStudName",name:"strStudName"},{data:"intStepOrder",name:"steps.order",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#btn-advSearch").on("click",function(t){e.draw(),t.preventDefault(),$("#frmAdv").trigger("reset"),$("#advanced_search").modal("hide")}),$("#advanced_search").on("hide.bs.modal",function(){$("#frmAdv").trigger("reset")}),$("#advsearch").click(function(){$("#advanced_search").modal("show")}),$("#student-list").on("click",".btn-progress",function(){var e=$(this).val(),r=$(this).attr("id");confirm("Are you sure you want to proceed?")&&$.ajax({url:t+"/"+e,type:"PUT",success:function(t){console.log(t);var a="<div id='stat"+t.user_id+"'>Todo: "+t.description+" <div class='pull-right'>"+t.order+"/"+r+"</div></div>";$("#stat"+t.user_id).replaceWith(a);var s=t.order/r*100;$("#prog"+e).css("width",s+"%").attr("aria-valuenow",s);var i="<button style='margin-top: 10px;' id"+r+" class='btn btn-warning btn-sm back' value="+t.user_id+"><i class='fa fa-undo'></i> Undo</button>";t.is_steps_done&&($("#dp"+t.user_id).replaceWith(i),$("#detail"+t.user_id).replaceWith("<td>This student meets the requirements for scholarship. This record will now be remove the progess list</td>"),console.log(t.user_id)),console.log(s+"/"+e)},error:function(r){console.log(t+"/"+e),console.log("Error:",r)}})}),$("#student-list").on("click",".open-modal",function(){$(this).val();$("#view_details").modal("show")}),$("#student-list").on("click",".btn-undo",function(){var e=$(this).val(),r=$(this).attr("id");confirm("Are you sure you want to proceed?")&&$.get(t+"/"+e,function(t){console.log(t);var a="<div id='stat"+t.user_id+"'>Todo: "+t.description+" <div class='pull-right'>"+t.order+"/"+r+"</div></div>";$("#stat"+t.user_id).replaceWith(a);var s=t.order/r*100;$("#prog"+e).css("width",s+"%").attr("aria-valuenow",s)})}),$("#student-list").on("click",".back",function(){var r=$(this).val();$(this).attr("id");confirm("Are you sure you want to proceed?")&&$.get(t+"/"+r+"/edit",function(t){e.draw()})})});