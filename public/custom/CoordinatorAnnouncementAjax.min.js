$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e="/coordinator/announcements",t="",n=$("#district-table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,order:[2,"desc"],columnDefs:[{width:"200px",targets:3},{width:"150px",targets:2}],columns:[{data:"title",name:"title"},{data:"description",name:"description"},{data:"date_post",name:"date_post",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#btn-add").click(function(){$("#btn-save").val("add"),$("#frmAnnouncement").trigger("reset"),$("#add_announcement").modal("show")}),$("#add_announcement").on("hidden.bs.modal",function(){$("#frmAnnouncement").trigger("reset"),$("#frmAnnouncement").parsley().destroy()}),$("#list").on("click",".open-modal",function(){var n=$(this).val();t=n,$.get(e+"/"+n+"/edit",function(e){"Deleted"==e?refresh():($("h4").text("Edit Announcement"),$("#title").val(e.title),$("#description").val(e.description),$("#btn-save").val("update"),$("#add_announcement").modal("show"))})}),$("#btn-save").click(function(){if($("#frmAnnouncement").parsley().destroy(),$("#frmAnnouncement").parsley().isValid()){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var a=new FormData($("#frmAnnouncement")[0]),o=$("#btn-save").val(),s=e;"update"==o&&(s+="/"+t),$.ajax({type:"POST",url:s,data:a,processData:!1,dataType:"json",contentType:!1,success:function(e){$("#add_announcement").modal("hide"),n.draw(),swal({title:"Success!",text:"<center>"+e.title+" is Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}}),$("#list").on("click",".btn-delete",function(){var t=$(this).val();swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Delete",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(a){setTimeout(function(){a&&$.ajax({url:e+"/"+t,type:"DELETE",success:function(e){n.draw(),swal({title:"Deleted!",text:"<center>"+e.title+" is Deleted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){}})},500)})})});