$(document).ready(function(){function t(){swal({title:"Record Deleted!",type:"warning",text:"<center>Refresh Records?</center>",html:!0,showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Refresh",cancelButtonText:"Cancel",closeOnConfirm:!0,allowOutsideClick:!0,closeOnCancel:!0},function(t){t&&a.draw()})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e="/admin/district",i="",a=$("#district-table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columnDefs:[{width:"130px",targets:2},{width:"70px",targets:1}],columns:[{data:"description",name:"description"},{data:"is_active",name:"is_active",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#add_district").on("hide.bs.modal",function(){$("#frmDistrict").trigger("reset"),$("#frmDistrict").parsley().destroy()}),$("#district-list").on("change","#isActive",function(){var e=$(this).val(),i=0;if($(this).prop("checked"))i=1;var a={is_active:i};$.ajax({url:"/admin/district/checkbox/"+e,type:"PUT",data:a,success:function(e){Pace.restart(),"Deleted"==e&&t()},error:function(t){}})}),$("#district-list").on("click",".open-modal",function(){var a=$(this).val();i=a,$.get(e+"/"+a+"/edit",function(e){"Deleted"==e?t():($("h4").text("Edit District"),$("#strDistDesc").val(e.description),$("#btn-save").val("update"),$("#add_district").modal("show"))})}),$("#btn-add").click(function(){$("h4").text("Add District"),$("#btn-save").val("add"),$("#frmDistrict").trigger("reset"),$("#add_district").modal("show")}),$("#district-list").on("click",".btn-delete",function(){var i=$(this).val();swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Delete",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(s){setTimeout(function(){s&&$.ajax({url:e+"/"+i,type:"DELETE",success:function(e){"Deleted"==e?t():"true"==e[0]?swal({title:"Failed!",text:"<center>Data in use</center>",type:"error",showConfirmButton:!1,allowOutsideClick:!0,html:!0}):(a.draw(),swal({title:"Deleted!",text:"<center>Data Deleted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0}))},error:function(t){}})},500)})}),$("#btn-save").click(function(){if($("#frmDistrict").parsley().destroy(),$("#frmDistrict").parsley().isValid()){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var t={strDistDesc:$("#strDistDesc").parsley("data-parsley-whitespace","squish").getValue()},s=$("#btn-save").val(),n="POST",r=e;"update"==s&&(n="PUT",r+="/"+i),$.ajax({type:n,url:r,data:t,dataType:"json",success:function(t){$("#add_district").modal("hide"),a.draw(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(t){$.notify({icon:"fa fa-warning",message:t.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}})});